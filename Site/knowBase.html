<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>База знаний</title>
    <link rel="icon" type="image/png" sizes="32x32" href="images/pizza_icon.ico">
    <link rel="stylesheet" href="styles/main_all.css" />
    <link rel="stylesheet" href="/styles/knowBase.css">
    <script src="https://webasr.yandex.net/jsapi/v1/webspeechkit.js" type="text/javascript"></script>
    <script src="js/dialog.js"></script>
    <script src="js/jquery.js"></script>
</head>
<body id="page-top" onload="dialog_window();">
    <header>
        <nav class="menu">
            <div class="menu-bur">
                <input type="checkbox" id="burger-checkbox" class="burger-checkbox" />
                <label for="burger-checkbox" class="burger"></label>
                <ul class="menu-list">
                    <li><a href="main.html" class="menu-item">Главная</a></li>
                    <li></li>
                    <li><a href="theory.html" class="menu-item">Теория</a></li>
                    <li></li>
                    <li><a href="Map.html" class="menu-item">Структура</a></li>
                    <li></li>
                    <li><a href="simulator.html" class="menu-item">Симулятор</a></li>
                    <li></li>
                    <li><a href="knowBase.html" class="menu-item">База знаний</a></li>
                    <li></li>
                </ul>
            </div>
            <ul class="menu-main">
                <li><a href="main.html">Главная</a></li>
                <li><a href="theory.html">Теория</a></li>
                <li><a href="Map.html">Структура</a></li>
                <li><a href="simulator.html">Симулятор</a></li>
                <li><a href="knowBase.html">База знаний</a></li>
            </ul>
        </nav>
    </header>
    <section class="back-img">
        <section class="back-container">
            <h1>ПРИГОТОВЛЕНИЕ ПИЦЦЫ</h1>
            <p>
                Страсть к пицце. Удовольствие. Вкус.
            </p>
        </section>
    </section>

        <section id="simulator" class="container">
        <table>
          <thead>
            <tr>
              <th scope="col">Вопросы</th>
              <th scope="col">Ответы</th>
            </tr>
          </thead>
          <tbody id="knowledgeTable">
          </tbody>
        </table>
    </section>

    <footer>
        <div class="footer">
            <p>Copyright © BSTU 2025 Zhuk Svetlana</p>
            <p>All rights reserved</p>
        </div>
    </footer>

    <script>
        let inputQuestion = document.querySelector(".question");
        let answer = document.querySelector(".answer");
        var knowledgeBase = [
            ["пицца", "имеет", "долгую и богатую историю"],
            ["пицца", "популяризировалась", "в XV веке в Неаполе"],
            ["маргарита", "создана", "в 1889 году"],
            ["разновидности пиццы", "включают", "классическую и более креативные варианты с необычными ингредиентами"],
            ["основные ингредиенты пиццы", "включают", "тесто, томатный соус и сыр"],
            ["тесто", "бывает", "тонким или толстым в зависимости от предпочтений"],
            ["кислый вкус пицце", "придают", "томаты"],
            ["пицца", "обладает", "своими особенностями в разных странах"],
            ["пицца с толстым тестом", "популярна", "в США"],
            ["пиццу с тонким и хрустящим тестом", "предпочитают", "в Италии"],
            ["необычные ингредиенты", "используют", "для пиццы в Японии, такие как майонез и морепродукты"],
            ["индийская пицца", "приправляется", "специями и острыми соусами"],
            ["профессиональные пиццерии", "используют", "каменную печь для выпекания пиццы"],
            ["пицца", "является", "символом Италии"],
            ["вкусная пицца", "становится", "неотъемлемой частью культурных мероприятий в Италии"],
            ["пицца", "влияет", "на мировой рынок через сети быстрого питания, такие как Domino's и Dodo"],
            ["пицца с мясом и сыром", "является", "довольно калорийной"],
            ["вегетарианская пицца", "будет", "легче по калорийности"],
            ["современные пиццерии", "предлагают", "разные варианты здоровых пицц с цельнозерновым тестом"],
            ["приготовление пиццы", "позволяет", "проявить творчество и экспериментировать с начинками"],
            ["креативность", "включает", "необычные ингредиенты, такие как трюфель или экзотические специи"],
            ["пицца с необычными ингредиентами", "становится", "все более популярной среди гурманов"],
            ["пицца", "готовится", "по пяти этапам, включая подготовку теста и нанесение соуса"],
            ["тесто", "раскатывается", "перед нанесением соуса"],
            ["соус", "распределяется", "по тесту"],
            ["начинка", "укладывается", "поочередно, начиная с мяса и заканчивая сыром"],
            ["пицца", "прожаривается", "до золотистой корочки в конвейерной печи"],
            ["пицца", "остывает", "немного перед подачей"],
            ["вегетарианская пицца", "включает", "овощи и легкие начинки"],
            ["мясная пицца", "включает", "мясные начинки, такие как ветчина и колбаса"],
            ["пицца", "состоит", "из томата, сыра и теста как основных компонентов"],
            ["каждая пицца", "популяризировалась", "через крупные международные сети, такие как Domino's и Pizza Hut"],
            ["технология выпекания пиццы", "состоит", "в правильной температуре и каменной печи для лучшего вкуса"],
            ["приготовление пиццы", "включает", "правильную раскатку теста и равномерное распределение соуса"],
            ["состав пиццы", "изменяется", "в зависимости от культурных предпочтений"],
            ["пицца", "приправлена", "базиликом и орегано для дополнительного аромата"],
            ["пицца с соусом", "прибавляет", "пикантный вкус и улучшает текстуру начинки"],
            ["пицца", "считается", "знаменитым и универсальным блюдом в мировом кулинарном искусстве"],
            ["пицца с соусом", "придает", "сладковатый вкус и улучшает текстуру блюда"],
            ["пицца", "приготовлена", "с цельнозерновым тестом для более здоровой версии"],
            ["креативность в приготовлении пиццы", "заключается", "в добавлении необычных ингредиентов, таких как трюфель"],
            ["каждая пицца", "популярна", "по всему миру благодаря своей универсальности и разнообразию"],
            ["пицца", "популяризируется", "через инновационные рецепты и подходы в приготовлении"],
            ["пицца", "приготавливается", "по всем стандартам рецептуры в разных странах"],
            ["пицца с соусом", "улучшает", "вкус и делает её более насыщенной"],
            ["пицца с мясом", "популярна", "в разных странах из-за своего насыщенного вкуса"],
            ["креативные пиццы", "включают", "экзотические специи и необычные продукты"],
            ["жители неаполя", "упаковывают", "пиццу с морепродуктами"],
            ["сыры с плесенью", "добавляют", "пицце изысканный вкус"],
            ["итальянские повара", "нагревают", "специи с грибами"],
            ["молодые кулинары", "создают", "тесто с морепродуктами"],
            ["итальянские повара", "подают", "тесто с грибами"],
            ["северная италия", "осваивает", "блюдо с морепродуктами"],
            ["современные технологии", "упаковывают", "пиццу с томатами"],
            ["жители неаполя", "обсуждают", "рецепты с овощами"],
            ["молодые кулинары", "продвигают", "тесто с морепродуктами"],
            ["сыр моцарелла", "улучшает", "вкус пиццы"],
            ["молодые кулинары", "открывают", "тесто с томатами"],
            ["любители пиццы", "обжаривают", "пиццу с морепродуктами"],
            ["шеф пиццы", "сервирует", "тесто с базиликом"],
            ["пицца без глютена", "популяризирует", "сыр с томатами"],
            ["мини-пиццы", "продвигают", "тесто с орегано"],
            ["ингредиенты с морепродуктами", "заменяют", "тесто с оливковым маслом"],
            ["веганская пицца", "находит", "сыр с грибами"],
            ["пицца с артишоками", "продвигает", "тесто с сыром"],
            ["региональные рецепты", "удивляют", "пиццу с сыром"],
            ["мастера пицц", "используют", "семейные рецепты пиццы, передающиеся из поколения в поколение"],
            ["итальянская культура", "отражается", "в традициях приготовления пиццы"],
            ["древние рецепты пиццы", "вдохновляют", "современных поваров по всему миру"],
            ["деревянные лопаты", "применяются", "для перемещения пиццы в дровяную печь"],
            ["пищевые эксперты", "исследуют", "влияние начинки на вкус пиццы"],
            ["мировая гастрономия", "признает", "пиццу важной частью кулинарного наследия"],
            ["авторы кулинарных книг", "описывают", "разнообразные стили приготовления пиццы"],
            ["дети", "обожают", "мини-пиццы с разноцветными овощами и сыром"],
            ["туристы", "ищут", "аутентичные пиццерии в разных городах Италии"],
            ["фуд-блогеры", "делятся", "уникальными рецептами домашней пиццы"],
            ["дизайнеры упаковки", "создают", "коробки для пиццы с тематическими рисунками"],
            ["пекарни", "экспериментируют", "с тестом для пиццы на закваске"],
            ["фуд-критики", "оценивают", "вкус и текстуру креативных пицц"],
            ["кулинарные школы", "обучают", "традиционной технике приготовления пиццы"],
            ["вкусовые предпочтения", "влияют", "на выбор начинки для пиццы"],
            ["технологи пищевой отрасли", "разрабатывают", "новые рецептуры безглютеновой пиццы"],
            ["шефы веганской кухни", "создают", "пиццы без продуктов животного происхождения"],
            ["экологи", "предлагают", "экологичные ингредиенты для здоровой пиццы"],
            ["искусственный интеллект", "помогает", "подбирать идеальные сочетания ингредиентов для пиццы"],
            ["архивы рецептов", "содержат", "документы о первых версиях итальянской пиццы"],
            ["городские фестивали", "проводят", "дни пиццы с дегустациями и мастер-классами"],
            ["фанаты пиццы", "организуют", "встречи по обмену рецептами"],
            ["мобильные пиццерии", "обслуживают", "посетителей на улицах и праздниках"],
            ["кулинарные телеведущие", "демонстрируют", "способы приготовления пиццы в эфире"],
            ["творческие повара", "сочетают", "традиционные и современные ингредиенты пиццы"],
            ["специалисты по тесту", "улучшают", "текстуру основы пиццы"],
            ["рестораторы", "внедряют", "новые форматы подачи пиццы"],
            ["гурманы", "ценят", "редкие сорта сыра в пицце"],
            ["семейные рестораны", "готовят", "пиццу по старинным рецептам"],
            ["любители классики", "отдают", "предпочтение пицце с минимальным количеством ингредиентов"],
            ["молодые бренды", "продвигают", "нестандартные форматы пиццы"],
            ["автоматизированные кухни", "создают", "пиццу без участия повара"],
            ["онлайн-платформы", "предлагают", "конструкторы пиццы с выбором ингредиентов"],
            ["энтузиасты здорового питания", "разрабатывают", "рецепты пиццы с низким содержанием жира"]
        ];

        var questionsArray = [
            ["Что имеет пицца?"],
            ["Когда популяризировалась пицца?"],
            ["Когда создана маргарита?"],
            ["Какие включают разновидности пиццы?"],
            ["Что включают основные ингредиенты пиццы?"],
            ["Каким бывает тесто?"],
            ["Что придают кислый вкус пицце?"],
            ["Чем обладает пицца?"],
            ["Где популярна пицца с толстым тестом?"],
            ["Где предпочитают пиццу с тонким и хрустящим тестом?"],
            ["Где используют необычные ингредиенты?"],
            ["Чем приправляется индийская пицца?"],
            ["Что используют профессиональные пиццерии?"],
            ["Чем является пицца?"],
            ["Чем становится вкусная пицца?"],
            ["На что влияет пицца?"],
            ["Какой является пицца с мясом и сыром?"],
            ["Какой будет вегетарианская пицца?"],
            ["Что предлагают современные пиццерии?"],
            ["Что позволяет приготовление пиццы?"],
            ["Что включает креативность?"],
            ["Какой становится пицца с необычными ингредиентами?"],
            ["Как готовится пицца?"],
            ["Когда раскатывается тесто?"],
            ["По чему распределяется соус?"],
            ["Как укладывается начинка?"],
            ["Где прожаривается пицца?"],
            ["Когда остывает пицца?"],
            ["Что включает вегетарианская пицца?"],
            ["Что включает мясная пицца?"],
            ["Из чего состоит пицца?"],
            ["Через что популяризировалась каждая пицца?"],
            ["В чем состоит технология выпекания пиццы?"],
            ["Что включает приготовление пиццы?"],
            ["Когда изменяется состав пиццы?"],
            ["Чем приправлена пицца?"],
            ["Что дает пицца с соусом?"],
            ["Чем считается пицца?"],
            ["Что придает пицца с соусом?"],
            ["С чем приготовлена пицца?"],
            ["В чем заключается креативность в приготовлении пиццы?"],
            ["Где популярна каждая пицца?"],
            ["Как популяризируется пицца?"],
            ["Как приготавливается пицца?"],
            ["Что улучшает пицца с соусом?"],
            ["Почему популярна пицца с мясом?"],
            ["Что включают креативные пиццы?"],
            ["Что упаковывают жители неаполя?"],
            ["Что добавляют сыры с плесенью?"],
            ["Что нагревают итальянские повара?"],
            ["Что создают молодые кулинары?"],
            ["Что подают итальянские повара?"],
            ["Что осваивает северная италия?"],
            ["Что упаковывают современные технологии?"],
            ["Что обсуждают жители неаполя?"],
            ["Что продвигают молодые кулинары?"],
            ["Что улучшает сыр моцарелла?"],
            ["Что открывают молодые кулинары?"],
            ["Что обжаривают любители пиццы?"],
            ["Что сервирует шеф пиццы?"],
            ["Что популяризирует пицца без глютена?"],
            ["Что продвигают мини-пиццы?"],
            ["Что заменяют ингредиенты с морепродуктами?"],
            ["Что находит веганская пицца?"],
            ["Что продвигает пицца с артишоками?"],
            ["Что удивляют региональные рецепты?"],
            ["Что используют мастера пицц?"],
            ["В чем отражается итальянская культура?"],
            ["Кого вдохновляют древние рецепты пиццы?"],
            ["Для чего применяются деревянные лопаты?"],
            ["Что исследуют пищевые эксперты?"],
            ["Что признает мировая гастрономия?"],
            ["Что описывают авторы кулинарных книг?"],
            ["Что обожают дети?"],
            ["Что ищут туристы?"],
            ["Чем делятся фуд-блогеры?"],
            ["Что создают дизайнеры упаковки?"],
            ["С чем экспериментируют пекарни?"],
            ["Что оценивают фуд-критики?"],
            ["Чему обучают кулинарные школы?"],
            ["На что влияют вкусовые предпочтения?"],
            ["Что разрабатывают технологи пищевой отрасли?"],
            ["Что создают шефы веганской кухни?"],
            ["Что предлагают экологи?"],
            ["В чем помогает искусственный интеллект?"],
            ["Что содержат архивы рецептов?"],
            ["Что проводят городские фестивали?"],
            ["Что организуют фанаты пиццы?"],
            ["Кого обслуживают мобильные пиццерии?"],
            ["Что демонстрируют кулинарные телеведущие?"],
            ["Что сочетают творческие повара?"],
            ["Что улучшают специалисты по тесту?"],
            ["Что внедряют рестораторы?"],
            ["Что ценят гурманы?"],
            ["Что готовят семейные рестораны?"],
            ["Чему отдают любители классики?"],
            ["Что продвигают молодые бренды?"],
            ["Что создают автоматизированные кухни?"],
            ["Что предлагают онлайн-платформы?"],
            ["Что разрабатывают энтузиасты здорового питания?"]
        ];

        function generateTable() {
            var tableBody = document.getElementById("knowledgeTable");

            questionsArray.forEach(function (question, index) {
                var item = knowledgeBase[index];
                var answer = `${item[0].charAt(0).toUpperCase() + item[0].slice(1)} ${item[1]} ${item[2]}.`;

                var row = document.createElement("tr");
                var questionCell = document.createElement("td");
                questionCell.innerHTML = question;
                var answerCell = document.createElement("td");
                answerCell.innerHTML = answer;

                row.appendChild(questionCell);
                row.appendChild(answerCell);

                tableBody.appendChild(row);
            });
        }

        document.addEventListener("DOMContentLoaded", generateTable);

        var endings = [
            ["ет","(ет|ут|ют)"], ["ут","(ет|ут|ют)"], ["ют","(ет|ут|ют)"],              //1 спряжение
            ["ит","(ит|ат|ят)"], ["ат","(ит|ат|ят)"], ["ят","(ит|ат|ят)"],              //2 спряжение

            ["ется","(ет|ут|ют)ся"],["утся","(ет|ут|ют)ся"],["ются","(ет|ут|ют)ся"],    //1 спряжение, возвратные
            ["ится","(ит|ат|ят)ся"], ["атся","(ит|ат|ят)ся"], ["ятся","(ит|ат|ят)ся"],  //2 спряжение, возвратные

            ["ен","ен"], ["ена","ена"], ["ено","ено"], ["ены","ены"],                   //краткие прилагательные
            ["ан","ан"], ["ана","ана"], ["ано","ано"], ["аны","аны"],                   //краткие прилагательные
            ["жен","жен"], ["жна","жна"], ["жно","жно"], ["жны","жны"],                 //краткие прилагательные

            ["на","на"], ["но","но"],
            ["такое","- это"],                                               //дополнение в массив псевдоокончаний

            ["лась","(лась|лись|лся)"], ["лся","(лась|лись|лся)"], ["лись","(лась|лись|лся)"],
            ["ировалась","(ировалась|ировались|ировался)"],

            ["вает", "(вает|вают)"], ["вают", "(вает|вают)"],
            ["вается", "(вает|вают)ся"], ["ваются", "(вает|вают)ся"]
        ];

        let blacklist = ["замена", "замены", "атрибут", "маршрут", "член", "нет"];

        function getEnding(word) {
          if (blacklist.indexOf(word) !== -1) return -1;
          for (var j = 0; j < endings.length; j++) {
            if (word.endsWith(endings[j][0])) {
                return j;
            }
          }
          return -1;
        }

        function big(str) {
          return str.substring(0, 1).toUpperCase() + str.substring(1);
        }

        function small(str) {
          return str.substring(0, 1).toLowerCase() + str.substring(1);
        }

        function getAnswer(question) {
            let text = small(question);
            let separators = "'\",.!?()[]\\/";
            var result = false;
            var answer = "";

            for (let i = 0; i < separators.length; i++)
                text = text.replace(separators[i], " " + separators[i]);

            var words = text.split(' ');

            for (let i = 0; i < words.length; i++)
                words[i] = small(words[i]);

            console.log(words);

            for (var i = 0; i < words.length; i++) {
                var ending = getEnding(words[i]);
                var predicate;
                if (ending >= 0) {
                    words[i] = words[i].slice(0, -endings[ending][0].length) + endings[ending][1];
                    predicate = new RegExp(words[i]);
                    // predicate = new RegExp(".*" + words[i] + ".*");
                    console.log("Предикат:" + predicate);

                    // if (endings[ending][0] === endings[ending][1]) {
                    //     if (!blacklist.includes(words[i])) {
                    //         if (words[i] === "равна" || words[i] ==="равен" || words[i] ==="равно") {
                    //             predicate = new RegExp(words[i]);
                    //             console.log("Предикат1:" + predicate);
                    //         } else {
                    //             predicate = new RegExp(words[i] + " " + (words[i + 1] || "."));
                    //             console.log("Предикат2:" + predicate);
                    //             i++;
                    //         }
                    //     }
                    // }

                    // console.log(predicate);

                    var subject_string = words.slice(i + 1).join(".*");
                    if (subject_string.length > 3) {
                        var subject = new RegExp(".*" + subject_string + ".*");
                        console.log("Подлежащее:" + subject);

                        for (var j = 0; j < knowledgeBase.length; j++) {
                            if (predicate.test(knowledgeBase[j][1]) &&
                                (subject.test(knowledgeBase[j][0]) || subject.test(knowledgeBase[j][2]))) {
                                answer += big(knowledgeBase[j][0]) + " " + knowledgeBase[j][1] + " " + knowledgeBase[j][2] + ". ";
                                result = true;
                            }
                        }
                    }
                }
            }

            if (!result){
                var subject_string = words.slice(i + 1).join(".*");

                if (subject_string.length > 3) {
                    var subject = new RegExp(".*" + subject_string + ".*");
                    console.log(subject);

                    for (var j = 0; j < knowledgeBase.length; j++) {
                        if (subject.test(knowledgeBase[j][0]) || subject.test(knowledgeBase[j][2])) {
                            answer += big(knowledgeBase[j][0]) + " " + knowledgeBase[j][1] + " " + knowledgeBase[j][2] + ". ";
                            result = true;
                        }
                    }
                }
            }

            if (!result) answer = "Ответ не найден. <br/>";
            return answer;
        }

        function startDialogue() {
          for (var i = 0; i < 100; i++) {
            if (!confirm("Продолжить диалог?")) break;
            var question = prompt("Введите вопрос", "");
            alert(getAnswer(question));
          }
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        startDialogue();
    });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>